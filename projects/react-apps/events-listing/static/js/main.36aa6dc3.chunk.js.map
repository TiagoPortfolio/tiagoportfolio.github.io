{"version":3,"sources":["components/SubscriptionsList.js","components/Event.js","components/EventsLoader.js","components/EventsList.js","components/Pagination.js","components/SearchBar.js","components/Categories.js","components/EmptyListMessage.js","components/StatusMessage.js","containers/EventsListContainer.js","index.js"],"names":["SubscriptionsList","_ref","list","subscriptions","map","subscription","index","react_default","a","createElement","key","name","price","Fragment","toFixed","Event","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","opacity","_this2","setTimeout","setState","categories","event","category","reduce","prev","curr","className","style","objectSpread","description","components_SubscriptionsList","Component","EventsLoader","react_content_loader_es","assign","height","width","speed","primaryColor","secondaryColor","ariaLabel","x","y","rx","ry","EventsList","events","page","pageLimit","isLoading","i","components_EventsLoader","slice","id","components_Event","Pagination","totalEvents","changePage","totalPages","Math","ceil","pages","_loop","href","onClick","max","min","SearchBar","eventSearchTerm","searchEvent","type","placeholder","value","onChange","CATEGORIES","Categories","currentCategory","filterCategory","EmptyListMessage","eventsearchTerm","length","message","push","StatusMessage","error","children","EventsListContainer","filterEvents","filter","toLowerCase","includes","sortEvents","sort","b","total","_ref2","handleCategoryFilter","eventsFound","handleEventSearch","e","target","handlePagination","bind","assertThisInitialized","fetch","then","response","ok","json","Error","data","sortedEvents","catch","_this$state","components_Categories","components_SearchBar","components_StatusMessage","components_EventsList","components_EmptyListMessage","components_Pagination","App","containers_EventsListContainer","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.36aa6dc3.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst SubscriptionsList = ({subscriptions}) => {\r\n  const list = subscriptions.map((subscription, index) => {\r\n    return (\r\n      <li key={index}>\r\n        <span>{subscription.name}</span>\r\n        <h3>\r\n          {!subscription.price ? (\r\n            <React.Fragment>\r\n              {'Free'}<sup />\r\n            </React.Fragment>\r\n          ) : (\r\n            <React.Fragment>\r\n              {(subscription.price / 100).toFixed(2)}<sup>â‚¬</sup>\r\n            </React.Fragment>\r\n          )}\r\n        </h3>\r\n      </li>\r\n    );\r\n  });\r\n\r\n  return <ul>{list}</ul>;\r\n};\r\n\r\nexport default SubscriptionsList;","import React, { Component } from 'react';\r\nimport SubscriptionsList from './SubscriptionsList';\r\n\r\nclass Event extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      opacity: 0,\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    setTimeout(() =>\r\n      this.setState({ opacity: 1})\r\n    , 100);\r\n  }\r\n  \r\n  render() {\r\n    const categories = this.props.event.categories\r\n      .map((category, index) => <span key={index}>{category}</span>)\r\n      .reduce((prev, curr) => [prev, ' / ', curr]);\r\n\r\n    return (\r\n      <div className=\"event-item\" style={{...this.state}}>\r\n        <div className=\"box-info\">\r\n          <div className=\"box-info--content\">\r\n            <div className=\"description\">\r\n              <h1>{this.props.event.name}</h1>\r\n              <p>{this.props.event.description}</p>\r\n            </div>\r\n            <div className=\"tags\">{categories}</div>\r\n          </div>\r\n          <div className=\"box-info--footer\">\r\n            <SubscriptionsList subscriptions={this.props.event.subscriptions} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n};\r\n\r\nexport default Event;\r\n","import React from 'react';\r\nimport ContentLoader from \"react-content-loader\";\r\n\r\nconst EventsLoader = (props) => (\r\n  <ContentLoader \r\n    height={173}\r\n    width={1141}\r\n    speed={2}\r\n    primaryColor=\"#f3f3f3\"\r\n    secondaryColor=\"#4bc3c9\"\r\n    ariaLabel=\"Loading Events...\"\r\n    {...props}\r\n  >\r\n    <rect x=\"29\" y=\"22.67\" rx=\"4\" ry=\"4\" width=\"115.83\" height=\"15.21\" /> \r\n    <rect x=\"30\" y=\"55.67\" rx=\"4\" ry=\"4\" width=\"440.72\" height=\"11.08\" /> \r\n    <rect x=\"987.69\" y=\"25.67\" rx=\"4\" ry=\"4\" width=\"125.19\" height=\"10.37\" />\r\n    <rect x=\"30\" y=\"115.15\" rx=\"4\" ry=\"4\" width=\"370.07\" height=\"14.92\" />\r\n  </ContentLoader>\r\n);\r\n\r\nexport default EventsLoader;","import React from 'react';\r\nimport Event from './Event';\r\nimport EventsLoader from '../components/EventsLoader';\r\n\r\nconst EventsList = ({events, page, pageLimit, isLoading}) => {\r\n  let list = [];\r\n\r\n  // Render content loader if loading\r\n  if (isLoading) {\r\n    for (let i = 0; i < pageLimit; i++) {\r\n      list[i] = (\r\n        <li key={i}>\r\n          <EventsLoader />\r\n        </li>\r\n      )\r\n    }\r\n  } else {\r\n    // Get events in a specific page\r\n    const pagedEvents = events.slice((page - 1) * pageLimit, page * pageLimit);\r\n\r\n    list = pagedEvents.map(event => (\r\n      <li key={event.id}>\r\n        <Event event={event} />\r\n      </li>\r\n    ));\r\n  }\r\n\r\n  return <ul>{list}</ul>;\r\n};\r\n\r\nexport default EventsList;\r\n","import React from 'react';\r\n\r\nconst Pagination = ({page, pageLimit, totalEvents, changePage}) => {\r\n  const totalPages = Math.ceil(totalEvents / pageLimit);\r\n  let pages = [];\r\n  for (let i = 1; i <= totalPages; i++) {\r\n    pages[i] = (\r\n      <li key={i} className={i === page ? 'active' : ''}>\r\n        <a href=\"#\" onClick={() => changePage(i)}>\r\n          {i}\r\n        </a>\r\n      </li>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <ul className=\"pagination\">\r\n      <li className={page === 1 ? 'hide' : ''}>\r\n        <a href=\"#\" onClick={() => changePage(Math.max(1, page - 1))}>\r\n          &lt;\r\n        </a>\r\n      </li>\r\n      {pages}\r\n      <li className={page === totalPages || !totalEvents ? 'hide' : ''}>\r\n        <a href=\"#\" onClick={() => changePage(Math.min(totalPages, page + 1))}>\r\n          &gt;\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default Pagination;\r\n","import React from 'react';\r\n\r\nconst SearchBar = ({eventSearchTerm, searchEvent}) => (\r\n  <header>\r\n    <input\r\n      type=\"text\"\r\n      placeholder=\"Search by event\"\r\n      value={eventSearchTerm}\r\n      onChange={searchEvent}\r\n    />\r\n  </header>\r\n);\r\n\r\nexport default SearchBar;\r\n","import React from 'react';\r\n\r\nconst CATEGORIES = [\r\n  'Dance',\r\n  'Entertainment',\r\n  'Festival',\r\n  'Museums',\r\n  'Music',\r\n  'Theatre'\r\n];\r\n\r\nconst Categories = ({currentCategory, filterCategory}) => (\r\n  <nav className=\"nav-categories\">\r\n    <h2>Categories</h2>\r\n    <ul className=\"nav-menu\">\r\n      {CATEGORIES.map((category, index) => (\r\n        <li\r\n          key={index}\r\n          className={currentCategory === category ? 'active' : ''}\r\n        >\r\n          <a href=\"#\" onClick={() => filterCategory(category)}>\r\n            {category}\r\n          </a>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  </nav>\r\n);\r\n\r\nexport default Categories;\r\n","import React from 'react';\r\n\r\nconst EmptyListMessage = ({events, eventsearchTerm, currentCategory, isLoading}) => {\r\n  // Hide component if not an empty list or if list is loading for the first time\r\n  if (events.length || isLoading) {\r\n    return null;\r\n  }\r\n\r\n  let message = ['No results found'];\r\n\r\n  if (eventsearchTerm) {\r\n    message.push(' for ', <em key=\"1\">\"{eventsearchTerm}\"</em>);\r\n  }\r\n\r\n  if (currentCategory) {\r\n    message.push(' in ', <strong key=\"2\">{currentCategory}</strong>);\r\n  }\r\n\r\n  message.push('.');\r\n\r\n  return <span>{message}</span>;\r\n};\r\n\r\nexport default EmptyListMessage;\r\n","import React from 'react';\r\n\r\nconst StatusMessage = ({error, children}) => {\r\n  if (error) {\r\n    return <p>{error.message}</p>;\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nexport default StatusMessage;\r\n","import React, {Component} from 'react';\r\nimport EventsList from '../components/EventsList';\r\nimport Pagination from '../components/Pagination';\r\nimport SearchBar from '../components/SearchBar';\r\nimport Categories from '../components/Categories';\r\nimport EmptyListMessage from '../components/EmptyListMessage';\r\nimport StatusMessage from '../components/StatusMessage';\r\n\r\nconst PAGE_LIMIT = 3;\r\n\r\nclass EventsListContainer extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      events: [], // Original events list\r\n      eventsFound: [], // Filtered events list\r\n      page: 1,\r\n      currentCategory: '',\r\n      eventSearchTerm: '',\r\n      isLoading: false,\r\n      error: null\r\n    };\r\n\r\n    this.handleEventSearch = this.handleEventSearch.bind(this);\r\n    this.handleCategoryFilter = this.handleCategoryFilter.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({isLoading: true});\r\n    // events.json file hosted in github pages\r\n    fetch('https://tiagoportfolio.github.io/data/events.json')\r\n      .then(response => {\r\n        if (response.ok) {\r\n          return response.json();\r\n        } else {\r\n          throw new Error('Something went wrong...');\r\n        }\r\n      })\r\n      .then(data => {\r\n        const sortedEvents = this.sortEvents(data);\r\n        this.setState({\r\n          events: sortedEvents,\r\n          eventsFound: sortedEvents,\r\n          isLoading: false\r\n        });\r\n      })\r\n      .catch(error => this.setState({error, isLoading: false}));\r\n  }\r\n\r\n  // Filter events by search term and category\r\n  filterEvents = (events, eventSearchTerm, category) =>\r\n    events.filter(\r\n      event =>\r\n        (eventSearchTerm\r\n          ? event.name.toLowerCase().includes(eventSearchTerm)\r\n          : true) && (category ? event.categories.includes(category) : true)\r\n    );\r\n\r\n  // Sort by ascending order of the sum of the plans price\r\n  sortEvents = events =>\r\n    events.sort(\r\n      (a, b) =>\r\n        a.subscriptions.reduce((total, {price}) => total + price, 0) -\r\n        b.subscriptions.reduce((total, {price}) => total + price, 0)\r\n    );\r\n\r\n  handleCategoryFilter = category => {\r\n    this.setState((state, props) => {\r\n      const currentCategory =\r\n        category === state.currentCategory ? '' : category;\r\n      return {\r\n        eventsFound: this.filterEvents(\r\n          state.events,\r\n          state.eventSearchTerm,\r\n          currentCategory\r\n        ),\r\n        currentCategory,\r\n        page: 1\r\n      };\r\n    });\r\n  };\r\n\r\n  handleEventSearch = e => {\r\n    const eventSearchTerm = e.target.value.toLowerCase();\r\n    this.setState((state, props) => ({\r\n      eventsFound: this.filterEvents(\r\n        state.events,\r\n        eventSearchTerm,\r\n        state.currentCategory\r\n      ),\r\n      eventSearchTerm,\r\n      page: 1\r\n    }));\r\n  };\r\n\r\n  handlePagination = page => {\r\n    this.setState({page});\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      eventsFound,\r\n      page,\r\n      eventSearchTerm,\r\n      currentCategory,\r\n      isLoading,\r\n      error\r\n    } = this.state;\r\n\r\n    return (\r\n      <div className=\"flex-container\">\r\n        <Categories\r\n          filterCategory={this.handleCategoryFilter}\r\n          currentCategory={currentCategory}\r\n        />\r\n        <section className=\"events-list\">\r\n          <SearchBar\r\n            searchEvent={this.handleEventSearch}\r\n            eventSearchTerm={eventSearchTerm}\r\n          />\r\n          <StatusMessage error={error}>\r\n            <EventsList events={eventsFound} page={page} pageLimit={PAGE_LIMIT} isLoading={isLoading}/>\r\n            <EmptyListMessage\r\n              events={eventsFound}\r\n              eventSearchTerm={eventSearchTerm}\r\n              currentCategory={currentCategory}\r\n              isLoading={isLoading}\r\n            />\r\n          </StatusMessage>\r\n          <Pagination\r\n            page={page}\r\n            pageLimit={PAGE_LIMIT}\r\n            totalEvents={eventsFound.length}\r\n            changePage={this.handlePagination}\r\n          />\r\n        </section>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EventsListContainer;\r\n","import React, {Component} from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './styles.css';\r\nimport EventsListContainer from './containers/EventsListContainer';\r\n\r\nexport default class App extends Component {\r\n  render() {\r\n    return <EventsListContainer />;\r\n  }\r\n}\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}